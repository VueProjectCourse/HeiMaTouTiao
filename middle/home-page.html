<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Home页面 | 黑马头条</title>
    <meta name="description" content="一个 移动端 技术论坛">
    <link rel="stylesheet" href="/HeiMaTouTiao/assets/style.f219d668.css">
    <link rel="modulepreload" href="/HeiMaTouTiao/assets/chunks/AlgoliaSearchBox.6cce2cf9.js">
    <link rel="modulepreload" href="/HeiMaTouTiao/assets/app.e4ff3064.js">
    <link rel="modulepreload" href="/HeiMaTouTiao/assets/middle_home-page.md.7f805dcb.lean.js">
    
    <meta name="twitter:title" content="Home页面 | 黑马头条">
  <meta property="og:title" content="Home页面 | 黑马头条">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/HeiMaTouTiao/" aria-label="黑马头条, back to home" data-v-675d8756 data-v-cc01ef16><!----> 黑马头条</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/HeiMaTouTiao/" data-v-b8818f8c>Guide <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/HeiMaTouTiao/config/basics" data-v-b8818f8c>Config Reference <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/HeiMaTouTiao/" data-v-b8818f8c>Guide <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/HeiMaTouTiao/config/basics" data-v-b8818f8c>Config Reference <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">前期准备</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/early/introduction">项目介绍</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/early/initialization">项目创建</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/early/deploy-vant">配置组件库</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/early/deploy-screen-adaptation">配置适配插件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/early/deploy-axios">配置网络请求插件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/early/layout">模板页面开发</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">登录页</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/login-render-base">渲染登录组件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/login-render-header">渲染登录头部</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/login-render-form">渲染登录表单</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/login-form-rules">添加校验规则</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/login-form-function">实现登录方法</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/login-token-vuex">存储token到vuex</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/login-token-storage">持久化存储token</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/login-global-loading">全局loading效果</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/login-global-auth">全局token认证</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">首页</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-render-base">渲染首页组件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-channels-static">频道列表页面</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-channels-dynamic">渲染频道列表</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-article-list">封装文章列表</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-article-list-data">获取文章列表数据</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-article-list-channelid">封装channelId属性</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-article-list-item">封装文章列表项</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-article-pullload">文章列表上拉加载</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-article-pullrefresh">文章列表下拉刷新</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-article-lazyload">图片懒加载</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-article-dateformat">格式化时间</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-article-feedback-pannel">展示反馈面板</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-article-feedback-first">渲染一级反馈</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-article-feedback-second">渲染二级反馈</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-article-pannel-position">指定面板挂载位置</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-article-not-interesting">设置不感兴趣文章</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-channel-render">渲染频道管理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-channel-more">渲染更多频道</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-channel-add">实现频道添加</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-channel-minus">实现频道删除</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-channel-reset">重置编辑状态</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/home-channel-contact">频道点击联动</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">文章搜索</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/search-page-render">渲染搜索页面</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/search-input-autofocus">搜索框自动聚焦</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/search-input-debounce">输入框防抖</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/search-keywords-highlight">关键词高亮</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/search-listory-render">渲染搜索历史</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/search-listory-add">添加搜索历史</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/search-listory-save">存储搜索历史</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/search-listory-clean">清空搜索历史</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/search-result-jump">跳转到搜索结果页</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/search-result-create">创建搜索结果页组件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/search-result-render">渲染搜索结果页</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/search-result-pullload">搜索结果上拉加载更多</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/search-result-toggle">关闭按钮的显示与隐藏</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">文章详情</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/article-detail-create">创建文章详情组件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/article-detail-props">开启props路由传参</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/article-detail-render">渲染文章详情数据</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/article-detail-follow">关注功能</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/article-detail-unfollow">取消关注</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/article-detail-like">点赞功能</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/article-detail-unlike">取消点赞</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/article-detail-comment-create">创建评论组件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/article-detail-comment-render">渲染评论组件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/article-detail-comment-like">评论点赞</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/article-detail-comment-unlike">评论取消点赞</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/article-detail-pubcomment-create">创建发布评论组件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/article-detail-pubcomment-condition">底部评论按需展示</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/article-detail-pubcomment-autofocus">输入框自动聚焦</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/article-detail-pubcomment-count">渲染评论的总数量</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/article-detail-pubcomment-function">发布评论功能</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/article-detail-pubcomment-popmotion">平滑滚动</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">个人中心</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/profile-render">渲染个人中心</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/profile-logout">退出登录</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/profile-user-edit-render">渲染用户编辑页面</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/profile-user-edit-name">修改用户姓名</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/profile-user-edit-birthday">修改用户生日</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/profile-user-edit-avatar">修改用户头像</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">小思同学</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/websocket-introduce">websocket介绍</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/websocket-chat-page">创建聊天组件页面</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/websocket-chat-render">动态渲染聊天消息</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/websocket-avatar-render">动态渲染用户头像</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/websocket-chat-push">动态添加聊天消息</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/websocket-install-config">安装和配置websocket</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/websocket-create-destory">创建和销毁socket实例</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/websocket-connect-listen">监听连接建立和关闭</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/websocket-message-receive">接收服务器的消息</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/websocket-message-send">向服务器发送消息</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/middle/websocket-auto-scroll-bottom">自动滚动到底部</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">后期优化</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/late/permission-control">页面权限控制</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/late/token-renew">token续签</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/late/project-optimization">项目优化</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/HeiMaTouTiao/late/build-package">项目打包</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="home页面" tabindex="-1">Home页面 <a class="header-anchor" href="#home页面" aria-hidden="true">#</a></h1><h2 id="渲染home组件" tabindex="-1">渲染Home组件 <a class="header-anchor" href="#渲染home组件" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">目标</p><p>这一小节，我们的目标是渲染Home组件</p></div><div class="warning custom-block"><p class="custom-block-title">步骤</p><ol><li>将资料目录下的<code>toutiao_logo.png</code>图片拷贝到项目<code>assets</code>资源目录</li><li>在<code>/src/views</code> 目录下新建<code>Home</code>文件夹，并在其下新建<code>Home.vue</code>组件</li><li>在路由模块中，导入刚才新建的<code>Home.vue</code>组件</li><li>找到主页<code>Main.vue</code>对应的路由规则，遇到<code>children</code>数组声明嵌套的子路由规则</li><li>在<code>Main.vue</code>组件的模板结构中，通过<code>router-view</code>声明<code>Home</code>的路由占位符</li></ol></div><div class="info custom-block"><p class="custom-block-title">体验</p><ul><li><strong>Step. 1：将资料目录下的<code>toutiao_logo.png</code>图片拷贝到项目<code>assets</code>资源目录</strong></li><li><strong>Step. 2：在<code>/src/views</code> 目录下新建<code>Home</code>文件夹，并在其下新建<code>Home.vue</code>组件</strong></li></ul><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 头部区域 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span> <span class="token attr-name">fixed</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 左侧的插槽 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#left</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../../assets/toutiao_logo.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logo<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 右侧的插槽 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#right</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>search<span class="token punctuation">&quot;</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>white<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>18<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-nav-bar</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Home&#39;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">// 组件外层容器的样式
.home-container</span> <span class="token punctuation">{</span>
  <span class="token property">padding-top</span><span class="token punctuation">:</span> 46px<span class="token punctuation">;</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">// logo 样式
.logo</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 80%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><strong>Step. 3：在路由模块中，导入刚才新建的<code>Home.vue</code>组件</strong></li></ul><div class="language-js"><pre><code><span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&#39;@/views/Home/Home.vue&#39;</span>
</code></pre></div><ul><li><strong>Step. 4：找到主页<code>Main.vue</code>对应的路由规则，遇到<code>children</code>数组声明嵌套的子路由规则</strong></li></ul><div class="language-js"><pre><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 带有 name 名称的路由规则，叫做“命名路由”</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> Login<span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;login&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span> Main<span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// path 为&quot;空字符串&quot;的子路由规则，叫做&quot;默认子路由&quot;</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> Home<span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;home&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><ul><li><strong>Step. 5：在<code>Main.vue</code>组件的模板结构中，通过<code>router-view</code>声明<code>Home</code>的路由占位符</strong></li></ul><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- Home 和 User 的路由占位符 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 底部的 TabBar --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar</span> <span class="token attr-name">route</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home-o<span class="token punctuation">&quot;</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user-o<span class="token punctuation">&quot;</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我的<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div><div class="danger custom-block"><p class="custom-block-title">总结</p><ul><li>【重点】</li><li>【难点】</li><li>【注意点】</li></ul></div><h2 id="渲染频道列表的基本结构" tabindex="-1">渲染频道列表的基本结构 <a class="header-anchor" href="#渲染频道列表的基本结构" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">目标</p><p>这一小节，我们的目标是渲染频道列表,基于 Vant 的<a href="https://vant-contrib.gitee.io/vant/#/zh-CN/tab" target="_blank" rel="noopener noreferrer">Tab标签页</a>组件，可以方便的渲染出频道列表的基本结构。</p></div><div class="warning custom-block"><p class="custom-block-title">步骤</p><ol><li>在<code>views/Home/Home.vue</code>组件的模板结构中，声明<code>DOM</code>结构</li><li>在<code>Home.vue</code>组件的<code>data</code>中，声明标签页激活项的索引<code>active</code></li><li>在<code>/src/cover.less</code>中，通过主题定制的方式，修改激活项的颜色值</li><li>为<code>&lt;van-tabs&gt;</code>组件添加<code>sticky</code>属性，实现频道列表的吸顶效果</li><li>为<code>&lt;van-tabs&gt;</code>组件添加<code>offset-top</code>属性，设置吸顶的距离</li><li>审查元素的样式，为<code>tabs</code>容器设置右`padding,预留出频道管理小图标的位置</li><li>和<code>&lt;van-tabs&gt;</code>平级，渲染频道管理的<code>&lt;van-icon&gt;</code>图标</li><li>通过自定义的<code>plus</code>类名，设置小图标的定位</li></ol></div><div class="info custom-block"><p class="custom-block-title">体验</p><ul><li><strong>Step. 1：在<code>views/Home/Home.vue</code>组件的模板结构中，声明<code>DOM</code>结构</strong></li></ul><div class="language-html"><pre><code><span class="token comment">&lt;!-- 频道列表的标签页 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabs</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>active<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>标签 1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>内容 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>标签 2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>内容 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>标签 3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>内容 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>标签 4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>内容 4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>标签 5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>内容 5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>标签 6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>内容 6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>标签 7<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>内容 7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>标签 8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>内容 8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabs</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><strong>Step. 2：在<code>Home.vue</code>组件的<code>data</code>中，声明标签页激活项的索引<code>active</code></strong></li></ul><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Home&#39;</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// 标签页激活项的索引</span>
      <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step. 3：在<code>/src/cover.less</code>中，通过主题定制的方式，修改激活项的颜色值</strong></li></ul><div class="language-less"><pre><code><span class="token comment">// Tab</span>
<span class="token variable">@tabs-bottom-bar-color<span class="token punctuation">:</span></span> <span class="token variable">@blue</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>Step. 4：为<code>&lt;van-tabs&gt;</code>组件添加<code>sticky</code>属性，实现频道列表的吸顶效果</strong></li></ul><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabs</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>active<span class="token punctuation">&quot;</span></span> <span class="token attr-name">sticky</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 省略其它代码 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabs</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><strong>Step. 5：为<code>&lt;van-tabs&gt;</code>组件添加<code>offset-top</code>属性，设置吸顶的距离</strong></li></ul><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabs</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>active<span class="token punctuation">&quot;</span></span> <span class="token attr-name">sticky</span> <span class="token attr-name">offset-top</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>46px<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 省略其它代码 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabs</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><strong>Step. 6：审查元素的样式，为<code>tabs</code>容器设置右`padding,预留出频道管理小图标的位置</strong></li></ul><div class="language-css"><pre><code><span class="token selector">// 为 tabs 容器设置右 padding
/deep/ .van-tabs__wrap</span> <span class="token punctuation">{</span>
  <span class="token property">padding-right</span><span class="token punctuation">:</span> 36px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step. 7：和<code>&lt;van-tabs&gt;</code>平级，渲染频道管理的<code>&lt;van-icon&gt;</code>图标</strong></li></ul><div class="language-vue"><pre><code><span class="token comment">&lt;!-- 频道列表的标签页 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabs</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>active<span class="token punctuation">&quot;</span></span> <span class="token attr-name">sticky</span> <span class="token attr-name">offset-top</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1.22666667rem<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabs</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 频道管理的小图标 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>plus<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>16<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>plus<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><ul><li><strong>Step. 8：通过自定义的<code>plus</code>类名，设置小图标的定位</strong></li></ul><div class="language-css"><pre><code><span class="token selector">// 频道管理小图标的定位
.plus</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 58px<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 999<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div class="danger custom-block"><p class="custom-block-title">总结</p><ul><li>【重点】</li><li>【难点】</li><li>【注意点】</li></ul></div><h2 id="渲染频道列表" tabindex="-1">渲染频道列表 <a class="header-anchor" href="#渲染频道列表" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">目标</p><p>这一小节，我们的目标是根据获取到的频道列表数据渲染频道列表</p></div><div class="warning custom-block"><p class="custom-block-title">步骤</p><ol><li>在<code>/src/api/</code>目录下新建<code>homeAPI</code>模块，并导入<code>/src/utils</code>目录下的 <code>request</code> 模块</li><li>在<code>homeAPI</code> 模块中，新建请求用户频道列表数据的接口</li><li>在<code>Home</code>组件中，按需导入<code>homeAPI.js</code>中的<code>getUserChannelAPI</code>接口</li><li>在<code>Home</code>组件中声明<code>userChannel</code>数组，用来存储用户的频道列表数据</li><li>在<code>Home</code>组件中，声明<code>initUserChannel</code> 方法，用来初始化用户的频道列表数据</li><li>在<code>Home</code>组件的<code>created</code>函数中，调用<code>initUserChannel</code>方法请求用户的频道列表数据</li><li>在 <code>Home</code> 组件的模板结构中，通过 <code>v-for</code> 指令，循环渲染用户的频道列表数据</li></ol></div><div class="info custom-block"><p class="custom-block-title">体验</p><ul><li><strong>Step.1：在<code>/src/api/</code>目录下新建<code>homeAPI</code>模块，并导入<code>/src/utils</code>目录下的 <code>request</code> 模块</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// 导入请求数据的 request 模块</span>
<span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">&#39;@/utils/request&#39;</span>
</code></pre></div><ul><li><strong>Step.2：在<code>homeAPI</code> 模块中，新建请求用户频道列表数据的接口</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// 请求用户频道列表数据的 API</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getUserChannelAPI</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/v1_0/user/channels&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.3：在<code>Home</code>组件中，按需导入<code>homeAPI.js</code>中的<code>getUserChannelAPI</code>接口</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// 按需导入 API 接口</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getUserChannelAPI <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/api/homeAPI&#39;</span>
</code></pre></div><ul><li><strong>Step.4：在<code>Home</code>组件中声明<code>userChannel</code>数组，用来存储用户的频道列表数据</strong></li></ul><div class="language-js"><pre><code><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">// 用户的频道列表数组</span>
    <span class="token literal-property property">userChannel</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.5：在<code>Home</code>组件中，声明<code>initUserChannel</code> 方法，用来初始化用户的频道列表数据</strong></li></ul><div class="language-js"><pre><code><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">initUserChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. 调用 API 接口</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getUserChannelAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 2. 判断请求是否成功</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>message <span class="token operator">===</span> <span class="token string">&#39;OK&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 3. 为用户的频道列表赋值</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>userChannel <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>channels
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.6：在<code>Home</code>组件的<code>created</code>函数中，调用<code>initUserChannel</code>方法请求用户的频道列表数据</strong></li></ul><div class="language-js"><pre><code><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initUserChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ul><li><strong>Step.7：在 <code>Home</code> 组件的模板结构中，通过 <code>v-for</code> 指令，循环渲染用户的频道列表数据</strong></li></ul><div class="language-html"><pre><code><span class="token comment">&lt;!-- 频道列表的标签页 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabs</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>active<span class="token punctuation">&quot;</span></span> <span class="token attr-name">sticky</span> <span class="token attr-name">offset-top</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1.22666667rem<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 循环渲染用户的频道 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in userChannel<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabs</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div><div class="danger custom-block"><p class="custom-block-title">总结</p><ul><li>【重点】</li><li>【难点】</li><li>【注意点】</li></ul></div><h2 id="封装文章列表组件" tabindex="-1">封装文章列表组件 <a class="header-anchor" href="#封装文章列表组件" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">目标</p><p>这一小节，我们的目标是封装文章列表组件</p></div><div class="warning custom-block"><p class="custom-block-title">步骤</p><ol><li>在components目录下，新建ArticleList文件夹，并新建组件</li><li>在Home组件中导入ArtList组件</li><li>注册ArtList组件</li><li>使用ArtList组件</li></ol></div><div class="info custom-block"><p class="custom-block-title">体验</p><ul><li><strong>Step.1：在components中，新建ArticleList文件夹，并新建组件</strong></li></ul><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>文章列表组件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// 大驼峰命名法：每个单词的首字母大写</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;ArticleList&#39;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><strong>Step.2：在Home组件中导入ArticleList组件</strong></li></ul><div class="language-js"><pre><code><span class="token keyword">import</span> ArticleList <span class="token keyword">from</span> <span class="token string">&#39;@/components/ArticleList/ArticleList.vue&#39;</span>
</code></pre></div><ul><li><strong>Step.3：注册ArticleList组件</strong></li></ul><div class="language-js"><pre><code><span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  ArticleList
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.4：使用ArticleList组件</strong></li></ul><div class="language-html"><pre><code><span class="token comment">&lt;!-- 频道列表的标签页 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabs</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>active<span class="token punctuation">&quot;</span></span> <span class="token attr-name">sticky</span> <span class="token attr-name">offset-top</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1.22666667rem<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 循环渲染用户的频道 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in userChannel<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 在每一个用户频道下，渲染出对应的“文章列表组件” --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ArticleList</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ArticleList</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabs</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div><div class="danger custom-block"><p class="custom-block-title">总结</p><ul><li>【重点】</li><li>【难点】</li><li>【注意点】</li><li>【面试题】</li></ul></div><h2 id="封装channelled属性" tabindex="-1">封装channelled属性 <a class="header-anchor" href="#封装channelled属性" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">目标</p><p>这一小节，我们的目标是封装channeled属性</p></div><div class="warning custom-block"><p class="custom-block-title">步骤</p><ol><li>在<code>ArticleList</code>组件的<code>props</code>节点下，封装<code>channelId</code>属性</li><li>在<code>Home</code>组件中使用<code>ArticleList</code>组件时，通过属性绑定必填的<code>channel-id</code>属性值</li><li>在<code>ArticleList</code>组件中，通过插值表达式渲染<code>props</code>接收到的<code>channelId</code></li></ol></div><div class="info custom-block"><p class="custom-block-title">体验</p><ul><li><strong>Step.1：在<code>ArticleList</code>组件的<code>props</code>节点下，封装<code>channelId</code>属性</strong></li></ul><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;ArtList&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 频道 Id（小驼峰命名法）</span>
    <span class="token literal-property property">channelId</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">,</span> <span class="token comment">// 数值类型</span>
      <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 必填项</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.2：在<code>Home</code>组件中使用<code>ArticleList</code>组件时，通过属性绑定必填的<code>channel-id</code>属性值</strong></li></ul><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabs</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>active<span class="token punctuation">&quot;</span></span> <span class="token attr-name">sticky</span> <span class="token attr-name">offset-top</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1.22666667rem<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in userChannel<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 注意：Vue 官方建议在绑定 props 时，把“小驼峰”的属性名，改造成“短横线”的形式使用 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>art-list</span> <span class="token attr-name">:channel-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>art-list</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabs</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><strong>Step.3：在<code>ArticleList</code>组件中，通过插值表达式渲染<code>props</code>接收到的<code>channelId</code></strong></li></ul><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>文章列表组件 --- {{channelId}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div><div class="danger custom-block"><p class="custom-block-title">总结</p><ul><li>【重点】</li><li>【难点】</li><li>【注意点】</li><li>【面试题】</li></ul></div><h2 id="请求文章列表的数据" tabindex="-1">请求文章列表的数据 <a class="header-anchor" href="#请求文章列表的数据" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">目标</p><p>这一小节，我们的目标是请求文章列表数据</p></div><div class="warning custom-block"><p class="custom-block-title">步骤</p><ol><li>在<code>homeAPI</code>模块中,封装名为<code>getArtListAPI</code>的接口</li><li>在<code>ArticleList</code>组件中，从<code>homeAPI</code>模块中按需导入<code>getArtListAPI</code>接口</li><li>在<code>ArticleList</code>组件的<code>data</code>中，声明<code>articlelist</code>数组，用来存放文章的列表数据。同时声明一个初始的时间戳<code>timestamp</code></li><li>在<code>ArticleList</code>组件中，定义<code>iniArticleList</code>的方法，根据<code>channelId</code>和t<code>imestamp</code>请求对应的文章列表数据</li><li>在<code>ArticleList</code>组件的<code>created</code>声明周期中，调用<code>iniArticleList</code>方法</li></ol></div><div class="info custom-block"><p class="custom-block-title">体验</p><ul><li><strong>Step.1：在<code>homeAPI</code>模块中,封装名为<code>getArtListAPI</code>的接口</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// 根据频道 Id 请求频道下的文章列表数据</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getArtListAPI</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/v1_0/articles&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">channel_id</span><span class="token operator">:</span> id<span class="token punctuation">,</span> <span class="token comment">// 频道的 Id</span>
      <span class="token literal-property property">timestamp</span><span class="token operator">:</span> time<span class="token punctuation">,</span> <span class="token comment">// 时间戳</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.2：在<code>ArticleList</code>组件中，从<code>homeAPI</code>模块中按需导入<code>getArtListAPI</code>接口</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// 按需导入 API 接口</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getArtListAPI <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/api/homeAPI&#39;</span>
</code></pre></div><ul><li><strong>Step.3：在<code>ArticleList</code>组件的<code>data</code>中，声明<code>articlelist</code>数组，用来存放文章的列表数据。同时声明一个初始的时间戳<code>timestamp</code></strong></li></ul><div class="language-js"><pre><code><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">// 文章列表的数组</span>
    <span class="token literal-property property">artlist</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 时间戳。初始的默认值为当前的时间戳</span>
    <span class="token literal-property property">timestamp</span><span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.4：在<code>ArticleList</code>组件中，定义<code>iniArticleList</code>的方法，根据<code>channelId</code>和t<code>imestamp</code>请求对应的文章列表数据</strong></li></ul><div class="language-js"><pre><code><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 初始化文章的列表数据</span>
  <span class="token keyword">async</span> <span class="token function">initArtList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 请求 API 接口</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getArtListAPI</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>channelId<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>timestamp<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>message <span class="token operator">===</span> <span class="token string">&#39;OK&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 为时间戳重新赋值</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>timestamp <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>pre_timestamp
      <span class="token comment">// 为 artlist 赋值</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>artlist <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>results
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.5：在<code>ArticleList</code>组件的<code>created</code>声明周期中，调用<code>iniArticleList</code>方法</strong></li></ul><div class="language-js"><pre><code><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 在组件创建的时候，请求文章的列表数据</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initArtList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div></div><div class="danger custom-block"><p class="custom-block-title">总结</p><ul><li>【重点】</li><li>【难点】</li><li>【注意点】</li><li>【面试题】</li></ul></div><h2 id="封装文章item项组件" tabindex="-1">封装文章Item项组件 <a class="header-anchor" href="#封装文章item项组件" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">目标</p><p>这一小节，我们的目标是封装文章Item项组件</p></div><div class="warning custom-block"><p class="custom-block-title">步骤</p><ol><li>在<code>/src/components/</code>目录下新建<code>ArtItem</code>文件夹，并在其下新建<code>ArtItem</code>组件</li><li>在<code>ArticleList</code>组件中导入、注册、并使用<code>ArtItem</code>组件</li><li>编写<code>ArtItem</code>组件的布局结构</li><li>编写<code>ArtItem</code>组件的布局样式</li><li>在<code>ArtItem</code>组件的<code>props</code>节点下，声明<code>article</code>属性</li><li>基于<code>props</code>接收到的<code>article</code>对象，渲染文章的信息</li><li>在<code>ArticleList</code>组件中，通过<code>v-for</code>指令循环渲染<code>ArtItem</code>组件时，动态绑定<code>article</code>属性的值</li></ol></div><div class="info custom-block"><p class="custom-block-title">体验</p><ul><li><strong>Step.1：在<code>/src/components/</code>目录下新建<code>ArtItem</code>文件夹，并在其下新建<code>ArtItem</code>组件</strong></li></ul><div class="language-js"><pre><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>文章 Item 组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;ArtItem&#39;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">&quot;less&quot;</span> scoped<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre></div><ul><li><strong>Step.2：在<code>ArticleList</code>组件中导入、注册、并使用<code>ArtItem</code>组件</strong></li></ul><div class="language-js"><pre><code><span class="token keyword">import</span> ArtItem <span class="token keyword">from</span> <span class="token string">&#39;@/components/ArtItem/ArtItem.vue&#39;</span>

<span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  ArtItem
<span class="token punctuation">}</span>
</code></pre></div><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 循环渲染文章的列表 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>art-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in artlist<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.art_id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>art-item</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><strong>Step.3：编写<code>ArtItem</code>组件的布局结构</strong></li></ul><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 标题区域的插槽 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#title</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- 标题 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>文章的标题噢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- 单张图片 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://www.escook.cn/vuebase/pics/1.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>thumb<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 三张图片 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>thumb-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://www.escook.cn/vuebase/pics/2.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>thumb<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://www.escook.cn/vuebase/pics/2.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>thumb<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://www.escook.cn/vuebase/pics/2.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>thumb<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- label 区域的插槽 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#label</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>label-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>作者 <span class="token entity named-entity" title=" ">&amp;nbsp;</span><span class="token entity named-entity" title=" ">&amp;nbsp;</span> 0评论 <span class="token entity named-entity" title=" ">&amp;nbsp;</span><span class="token entity named-entity" title=" ">&amp;nbsp;</span> 发布日期<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- 关闭按钮 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cross<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-cell</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><strong>Step.4：编写<code>ArtItem</code>组件的布局样式</strong></li></ul><div class="language-css"><pre><code><span class="token selector">.label-box</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.thumb</span> <span class="token punctuation">{</span>
  // 矩形黄金比例：0.618
  <span class="token property">width</span><span class="token punctuation">:</span> 113px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 70px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #f8f8f8<span class="token punctuation">;</span>
  <span class="token property">object-fit</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.title-box</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> flex-start<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.thumb-box</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.5：在<code>ArtItem</code>组件的<code>props</code>节点下，声明<code>article</code>属性</strong></li></ul><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;ArtItem&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 文章的信息对象</span>
    <span class="token literal-property property">article</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span> <span class="token comment">// 数据类型</span>
      <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 必填项</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.6：基于<code>props</code>接收到的<code>article</code>对象，渲染文章的信息</strong></li></ul><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 标题区域的插槽 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#title</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- 标题 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{article.title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- 单张图片 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>thumb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article.cover.type === 1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article.cover.images[0]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 三张图片 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>thumb-box<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article.cover.type === 3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>thumb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item, index) in article.cover.images<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- label 区域的插槽 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#label</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>label-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{article.aut_name}} <span class="token entity named-entity" title=" ">&amp;nbsp;</span><span class="token entity named-entity" title=" ">&amp;nbsp;</span> {{article.comm_count}}评论 <span class="token entity named-entity" title=" ">&amp;nbsp;</span><span class="token entity named-entity" title=" ">&amp;nbsp;</span> {{article.pubdate}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- 关闭按钮 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cross<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-cell</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><strong>Step.7：在<code>ArticleList</code>组件中，通过<code>v-for</code>指令循环渲染<code>ArtItem</code>组件时，动态绑定<code>article</code>属性的值</strong></li></ul><div class="language-html"><pre><code><span class="token comment">&lt;!-- 循环渲染文章的列表 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>art-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in artlist<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.art_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:article</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>art-item</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div><h2 id="上拉加载更多" tabindex="-1">上拉加载更多 <a class="header-anchor" href="#上拉加载更多" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">目标</p><p>这一小节，我们的目标是实现上拉加载更多功能,我们可以基于基于Vant的<a href="https://vant-contrib.gitee.io/vant/#/zh-CN/list" target="_blank" rel="noopener noreferrer">List列表</a>组件，可以轻松实现列表的上拉加载更多效果</p></div><div class="warning custom-block"><p class="custom-block-title">步骤</p><ol><li>在<code>ArtList</code>组件的<code>data</code>中，声明<code>loading</code>和<code>finished</code></li><li>在<code>ArtList</code>组件的模板结构中，使用<code>&lt;van-list&gt;</code>组件将<code>&lt;art-item&gt;</code>组件包裹起来</li><li>在<code>ArtList</code>组件的<code>methods</code>中声明 onLoad 函数</li><li>为<code>&lt;van-list&gt;</code>组件绑定immediate-check属性，防止首次加载时触发<code>load</code>事件</li><li>在<code>&lt;van-list&gt;</code>组件的<code>@load=&quot;onLoad&quot;</code>事件处理函数中，调用<code>initArtList</code>方法</li><li>当下一页数据请求回来之后，对新旧数据的拼接操作</li><li>当下一页数据请求回来之后，需要进行新旧数据的拼接操作</li><li>当下一页数据请求回来之后，根据请求的结果，判断所有数据是否已加载完毕</li></ol></div><div class="info custom-block"><p class="custom-block-title">体验</p><ul><li><strong>Step.1：在<code>ArtList</code>组件的<code>data</code>中，声明<code>loading</code>和<code>finished</code></strong></li></ul><div class="language-js"><pre><code><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">// loading 表示是否正在进行上拉加载的请求</span>
    <span class="token comment">//   每当触发 List 组件的上拉加载更多时，List 组件会自动把 loading 设为 true</span>
    <span class="token comment">//   每当下一页的数据请求回来以后，需要程序员手动的把 loading 设为 false，</span>
    <span class="token comment">//   否则：再次触发上拉加载更多时，不会发起请求！！</span>
    <span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

    <span class="token comment">// finished 表示所有数据是否加载完毕</span>
    <span class="token comment">//    false 表示还有下一页的数据</span>
    <span class="token comment">//    true  表示所有数据都已加载完毕</span>
    <span class="token literal-property property">finished</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.2：在<code>ArtList</code>组件的模板结构中，使用<code>&lt;van-list&gt;</code>组件将<code>&lt;art-item&gt;</code>组件包裹起来</strong></li></ul><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-list</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loading<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:finished</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>finished<span class="token punctuation">&quot;</span></span> <span class="token attr-name">finished-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>没有更多了<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@load</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onLoad<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 循环渲染文章的列表 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>art-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in artlist<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.art_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:article</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>art-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-list</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><strong>Step.3：在<code>ArtList</code>组件的<code>methods</code>中声明 onLoad 函数</strong></li></ul><div class="language-js"><pre><code><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 加载更多的数据</span>
  <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;触发了上拉加载更多&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.4：为<code>&lt;van-list&gt;</code>组件绑定immediate-check属性，防止首次加载时触发<code>load</code>事件</strong></li></ul><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-list</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loading<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:finished</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>finished<span class="token punctuation">&quot;</span></span> <span class="token attr-name">finished-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>没有更多了<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@load</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onLoad<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:immediate-check</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 循环渲染文章的列表 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>art-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in artlist<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.art_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:article</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>art-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-list</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><strong>Step.5：在<code>&lt;van-list&gt;</code>组件的<code>@load=&quot;onLoad&quot;</code>事件处理函数中，调用<code>initArtList</code>方法</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// 加载更多的数据</span>
<span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;触发了上拉加载更多&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initArtList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.6：当下一页数据请求回来之后，对新旧数据的拼接操作</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// 初始化文章的列表数据</span>
<span class="token keyword">async</span> <span class="token function">initArtList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 请求 API 接口</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getArtListAPI</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>channelId<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>message <span class="token operator">===</span> <span class="token string">&#39;OK&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 为时间戳重新赋值</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>timestamp <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>pre_timestamp
    <span class="token comment">// 1. 上拉加载更多时，应该是“旧数据”在前，“新数据”在后</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>artlist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>artlist<span class="token punctuation">,</span> <span class="token operator">...</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>results<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ul><li><strong>Step.7：当下一页数据请求回来之后，需要进行新旧数据的拼接操作</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// 初始化文章的列表数据</span>
<span class="token keyword">async</span> <span class="token function">initArtList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 请求 API 接口</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getArtListAPI</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>channelId<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>timestamp<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>message <span class="token operator">===</span> <span class="token string">&#39;OK&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 为时间戳重新赋值</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>timestamp <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>pre_timestamp
    <span class="token comment">// 1. 上拉加载更多时，应该是“旧数据”在前，“新数据”在后</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>artlist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>artlist<span class="token punctuation">,</span> <span class="token operator">...</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>results<span class="token punctuation">]</span>
    <span class="token comment">// 2. 重置 loading 为 false</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ul><li><strong>Step.8：当下一页数据请求回来之后，根据请求的结果，判断所有数据是否已加载完毕</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// 初始化文章的列表数据</span>
<span class="token keyword">async</span> <span class="token function">initArtList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 请求 API 接口</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getArtListAPI</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>channelId<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>timestamp<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>message <span class="token operator">===</span> <span class="token string">&#39;OK&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 为时间戳重新赋值</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>timestamp <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>pre_timestamp
    <span class="token comment">// 1. 上拉加载更多时，应该是“旧数据”在前，“新数据”在后</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>artlist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>artlist<span class="token punctuation">,</span> <span class="token operator">...</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>results<span class="token punctuation">]</span>
    <span class="token comment">// 2. 重置 loading 为 false</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token comment">// 3. 判断所有的数据是否已加载完毕</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>pre_timestamp <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>finished <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div></div><div class="danger custom-block"><p class="custom-block-title">总结</p><ul><li>【重点】</li><li>【难点】</li><li>【注意点】</li><li>【面试题】</li></ul></div><h2 id="下拉刷新" tabindex="-1">下拉刷新 <a class="header-anchor" href="#下拉刷新" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">目标</p><p>这一小节，我们的目标是完成下拉刷新功能，基于 Vant 的 <a href="https://vant-contrib.gitee.io/vant/#/zh-CN/pull-refresh" target="_blank" rel="noopener noreferrer">PullRefresh 下拉刷新</a>组件，可以轻松实现列表的下拉刷新效果</p></div><div class="warning custom-block"><p class="custom-block-title">步骤</p><ol><li>在 <code>ArtList.vue</code> 组件的 <code>data</code> 中声明<code>isLoading</code></li><li>在 <code>ArtList.vue</code> 组件的模板结构中，在 <code>&lt;van-list&gt;</code> 之外包裹实现下拉刷新的 <code>&lt;van-pull-refresh&gt;</code> 组件</li><li>在 <code>ArtList.vue</code> 组件的 <code>methods</code> 中，声明 <code>@refresh</code> 的事件处理函数 <code>onRefresh</code></li><li>在 <code>ArtList.vue</code> 组件 <code>methods</code> 节点下的 <code>onRefresh</code> 方法中，调用 <code>initArtList</code> 函数请求下拉刷新的数据</li><li>改造 <code>methods</code> 中的 <code>initArtList</code> 函数，通过形参接收调用者传递过来的值</li><li>进一步改造 <code>initArtList</code> 函数，根据 <code>isRefresh</code> 的值，来决定如何拼接请求到的数据</li><li>没有更多数据时，禁用下拉刷新的效果</li></ol></div><div class="info custom-block"><p class="custom-block-title">体验</p><ul><li><strong>Step.1：在 <code>ArtList.vue</code> 组件的 <code>data</code> 中声明<code>isLoading</code></strong></li></ul><div class="language-js"><pre><code><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">// 省略其它的数据项...</span>

    <span class="token comment">// 是否正在进行下拉刷新的请求</span>
    <span class="token literal-property property">isLoading</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.2：在 <code>ArtList.vue</code> 组件的模板结构中，在 <code>&lt;van-list&gt;</code> 之外包裹实现下拉刷新的 <code>&lt;van-pull-refresh&gt;</code> 组件</strong></li></ul><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 下拉刷新 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-pull-refresh</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isLoading<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@refresh</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onRefresh<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 上拉加载更多 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-list</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loading<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:finished</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>finished<span class="token punctuation">&quot;</span></span> <span class="token attr-name">finished-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>没有更多了<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@load</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onLoad<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:immediate-check</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 循环渲染文章的列表 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>art-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in artlist<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.art_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:article</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>art-item</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-list</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-pull-refresh</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><strong>Step.3：在 <code>ArtList.vue</code> 组件的 <code>methods</code> 中，声明 <code>@refresh</code> 的事件处理函数 <code>onRefresh</code></strong></li></ul><div class="language-js"><pre><code><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 下拉刷新</span>
  <span class="token function">onRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;触发了下拉刷新&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre></div><ul><li><strong>Step.4：在 <code>ArtList.vue</code> 组件 <code>methods</code> 节点下的 <code>onRefresh</code> 方法中，调用 <code>initArtList</code> 函数请求下拉刷新的数据</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// 下拉刷新</span>
<span class="token function">onRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initArtList</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.5：改造 <code>methods</code> 中的 <code>initArtList</code> 函数，通过形参接收调用者传递过来的值</strong></li></ul><div class="language-js"><pre><code><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 初始化文章的列表数据</span>
  <span class="token comment">// 如果 isRefresh 的值为 true，证明是下拉刷新，在最终拼接数据时，应该是“新数据”在前，“旧数据”在后</span>
  <span class="token comment">// 如果 isRefresh 的值不为 true，证明不是下拉刷新，则拼接数据时，应该是“旧数据”在前，“新数据”在后</span>
  <span class="token keyword">async</span> <span class="token function">initArtList</span><span class="token punctuation">(</span><span class="token parameter">isRefresh</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 省略其它代码...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.6：进一步改造 <code>initArtList</code> 函数，根据 <code>isRefresh</code> 的值，来决定如何拼接请求到的数据</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// 初始化文章的列表数据</span>
<span class="token keyword">async</span> <span class="token function">initArtList</span><span class="token punctuation">(</span><span class="token parameter">isRefresh</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 请求 API 接口</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getArtListAPI</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>channelId<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>message <span class="token operator">===</span> <span class="token string">&#39;OK&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 为时间戳重新赋值</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>timestamp <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>pre_timestamp
    <span class="token comment">// 判断是否为下拉刷新</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isRefresh<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 下拉刷新</span>
      <span class="token comment">// 1. “新数据”在前，“旧数据”在后</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>artlist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>results<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>artlist<span class="token punctuation">]</span>
      <span class="token comment">// 2. 重置 isLoading 为 false</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>isLoading <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 上拉加载</span>
      <span class="token comment">// 1. “旧数据”在前，“新数据”在后</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>artlist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>artlist<span class="token punctuation">,</span> <span class="token operator">...</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>results<span class="token punctuation">]</span>
      <span class="token comment">// 2. 重置 loading 为 false</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 3. 判断所有的数据是否已加载完毕</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>pre_timestamp <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>finished <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.7：没有更多数据时，禁用下拉刷新的效果</strong></li></ul><div class="language-html"><pre><code><span class="token comment">&lt;!-- 下拉刷新 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-pull-refresh</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isLoading<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@refresh</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onRefresh<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>finished<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-pull-refresh</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div><h2 id="格式化时间" tabindex="-1">格式化时间 <a class="header-anchor" href="#格式化时间" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">目标</p><p>这一小节，我们的目标是实现一个基于当前时间的过滤器，基于 <a href="https://dayjs.fenxianglu.cn/" target="_blank" rel="noopener noreferrer">day.js</a> 可以方便的实现相对时间的计算</p></div><div class="warning custom-block"><p class="custom-block-title">步骤</p><ol><li>安装 <code>day.js</code> 包：</li><li>在 <code>main.js</code> 入口文件中导入 <code>day.js</code> 相关的模块：</li><li>在 <code>main.js</code> 入口文件中，配置<code>插件和语言包</code>：</li><li>在 <code>main.js</code> 入口文件中，定义格式化时间的<code>全局过滤器</code>：</li><li>在 <code>ArtItem.vue</code> 组件中，使用<code>全局过滤器格式化时间</code>：</li></ol></div><div class="info custom-block"><p class="custom-block-title">体验</p><ul><li><strong>Step.1：安装 <code>day.js</code> 包</strong></li></ul><div class="language-bash"><pre><code><span class="token function">npm</span> <span class="token function">install</span> dayjs --save
</code></pre></div><ul><li><strong>Step.2：在 <code>main.js</code> 入口文件中导入 <code>day.js</code> 相关的模块</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// 导入 dayjs 的核心模块</span>
<span class="token keyword">import</span> dayjs <span class="token keyword">from</span> <span class="token string">&#39;dayjs&#39;</span>

<span class="token comment">// 导入计算相对时间的插件</span>
<span class="token keyword">import</span> relativeTime <span class="token keyword">from</span> <span class="token string">&#39;dayjs/plugin/relativeTime&#39;</span>

<span class="token comment">// 导入中文语言包</span>
<span class="token keyword">import</span> zh <span class="token keyword">from</span> <span class="token string">&#39;dayjs/locale/zh-cn&#39;</span>
</code></pre></div><ul><li><strong>Step.3：在 <code>main.js</code> 入口文件中，配置<code>插件和语言包</code></strong></li></ul><div class="language-js"><pre><code><span class="token comment">// 配置“计算相对时间”的插件</span>
dayjs<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>relativeTime<span class="token punctuation">)</span>

<span class="token comment">// 配置中文语言包</span>
dayjs<span class="token punctuation">.</span><span class="token function">locale</span><span class="token punctuation">(</span>zh<span class="token punctuation">)</span>
</code></pre></div><ul><li><strong>Step.4：在 <code>main.js</code> 入口文件中，定义格式化时间的<code>全局过滤器</code></strong></li></ul><div class="language-js"><pre><code><span class="token comment">// dt 参数是文章的发表时间</span>
Vue<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">&#39;dateFormat&#39;</span><span class="token punctuation">,</span> <span class="token parameter">dt</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 调用 dayjs() 得到的是当前的时间</span>
  <span class="token comment">// .to() 方法的返回值，是计算出来的“相对时间”</span>
  <span class="token keyword">return</span> <span class="token function">dayjs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>dt<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><strong>Step.5：在 <code>ArtItem.vue</code> 组件中，使用<code>全局过滤器格式化时间</code></strong></li></ul><div class="language-html"><pre><code><span class="token comment">&lt;!-- label 区域的插槽 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#label</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>label-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{article.aut_name}} <span class="token entity named-entity" title=" ">&amp;nbsp;</span><span class="token entity named-entity" title=" ">&amp;nbsp;</span> {{article.comm_count}}评论 <span class="token entity named-entity" title=" ">&amp;nbsp;</span><span class="token entity named-entity" title=" ">&amp;nbsp;</span> {{article.pubdate | dateFormat}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 关闭按钮 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cross<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div><div class="danger custom-block"><p class="custom-block-title">总结</p><ul><li>【重点】</li><li>【难点】</li><li>【注意点】</li><li>【面试题】</li></ul></div><h2 id="文章列表图片的懒加载" tabindex="-1">文章列表图片的懒加载 <a class="header-anchor" href="#文章列表图片的懒加载" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">目标</p><p>这一小节，我们的目标是实现文章列表图片的懒加载，基于 Vant 的 <a href="https://vant-contrib.gitee.io/vant/#/zh-CN/lazyload" target="_blank" rel="noopener noreferrer">Lazyload 懒加载</a>，可以轻松实现列表中图片的懒加载效果</p></div><div class="warning custom-block"><p class="custom-block-title">步骤</p><ol><li>在 <code>main.js</code> 入口文件中，按需导入 <code>Lazyload</code> 指令</li><li>在<code>main.js</code> 中将 <code>Lazyload</code> 注册为全局可用的指令</li><li>在 <code>ArtItem.vue</code> 组件中，删除 <code>&lt;img&gt;</code> 标签的 <code>src 属性</code>，并应用 <code>v-lazy 指令</code>，指令的值是要展示的图片地址</li></ol></div><div class="info custom-block"><p class="custom-block-title">体验</p><ul><li><strong>Step.1：在 <code>main.js</code> 入口文件中，按需导入 <code>Lazyload</code> 指令</strong></li></ul><div class="language-js"><pre><code><span class="token keyword">import</span> Vant<span class="token punctuation">,</span> <span class="token punctuation">{</span> Lazyload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vant&#39;</span>
</code></pre></div><ul><li><strong>Step.2：在<code>main.js</code> 中将 <code>Lazyload</code> 注册为全局可用的指令</strong></li></ul><div class="language-js"><pre><code>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Lazyload<span class="token punctuation">)</span>
</code></pre></div><ul><li><strong>Step.3：在 <code>ArtItem.vue</code> 组件中，删除 <code>&lt;img&gt;</code> 标签的 <code>src 属性</code>，并应用 <code>v-lazy 指令</code>，指令的值是要展示的图片地址</strong></li></ul><div class="language-html"><pre><code><span class="token comment">&lt;!-- 单张图片 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>thumb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article.cover.type === 1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-lazy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article.cover.images[0]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 三张图片 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>thumb-box<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>article.cover.type === 3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>thumb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item, index) in article.cover.images<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-lazy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div><h2 id="展示反馈的动作画板" tabindex="-1">展示反馈的动作画板 <a class="header-anchor" href="#展示反馈的动作画板" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">目标</p><p>这一小节，我们的目标是展示反馈的动作面板，基于 Vant 的 <a href="https://vant-contrib.gitee.io/vant/#/zh-CN/action-sheet" target="_blank" rel="noopener noreferrer">ActionSheet 动作面板</a>组件，可以方便的渲染出反馈操作对应的区域</p></div><div class="warning custom-block"><p class="custom-block-title">步骤</p><ol><li>在 <code>/src/components/ArtItem/</code> 目录下的 <code>ArtItem.vue</code> 组件中，声明动作面板对应的 DOM 结构</li><li>在 <code>ArtItem.vue</code> 组件的 <code>data</code> 中声明布尔值 show，用来控制动作面板的显示与隐藏</li><li>在点击 <code>ArtItem.vue</code> 组件中的“关闭按钮”时，展示反馈的动作面板</li></ol></div><div class="info custom-block"><p class="custom-block-title">体验</p><ul><li><strong>Step.1：在 <code>/src/components/ArtItem/</code> 目录下的 <code>ArtItem.vue</code> 组件中，声明动作面板对应的 DOM 结构</strong></li></ul><div class="language-html"><pre><code><span class="token comment">&lt;!-- 文章的信息 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-cell</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 反馈的动作面板 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-action-sheet</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cancel-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>取消<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:closeable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-action-sheet</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><strong>Step.2：在 <code>ArtItem.vue</code> 组件的 <code>data</code> 中声明布尔值 show，用来控制动作面板的显示与隐藏</strong></li></ul><div class="language-js"><pre><code><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">// 是否展示反馈面板</span>
    <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.3：在点击 <code>ArtItem.vue</code> 组件中的“关闭按钮”时，展示反馈的动作面板</strong></li></ul><div class="language-html"><pre><code><span class="token comment">&lt;!-- 关闭按钮 --&gt;</span>
<span class="token comment">&lt;!-- 通过 .stop 事件修饰符，阻止点击事件的冒泡 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cross<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click.stop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show = true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div></div><div class="danger custom-block"><p class="custom-block-title">总结</p><ul><li>【重点】</li><li>【难点】</li><li>【注意点】</li><li>【面试题】</li></ul></div><p>]</p><h2 id="渲染一级反馈面板的结构" tabindex="-1">渲染一级反馈面板的结构 <a class="header-anchor" href="#渲染一级反馈面板的结构" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">目标</p><p>这一小节，我们的目标是 渲染一级反馈面板的结构，基于 Vant 的 <a href="https://vant-contrib.gitee.io/vant/#/zh-CN/cell" target="_blank" rel="noopener noreferrer">Cell 单元格</a>组件，可以快速渲染出一级反馈面板的可选项</p></div><div class="warning custom-block"><p class="custom-block-title">步骤</p><ol><li>在 <code>ArtItem.vue</code> 组件的反馈动作面板中，声明如下的<strong>一级反馈面板</strong>可选项</li><li>在 <code>ArtItem.vue</code> 组件的 <code>&lt;style&gt;</code> 节点下，声明 <code>center-title</code> 类名</li><li>在 <code>ArtItem.vue</code> 组件的 <code>data</code> 中声明如下的 <code>actions</code> 可选项数组</li><li>基于 <code>v-for</code> 指令，循环渲染一级反馈面板的可选项列表</li></ol></div><div class="info custom-block"><p class="custom-block-title">体验</p><ul><li><strong>Step.1：在 <code>ArtItem.vue</code> 组件的反馈动作面板中，声明如下的</strong>一级反馈面板<strong>可选项</strong></li></ul><div class="language-html"><pre><code><span class="token comment">&lt;!-- 反馈的动作面板 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-action-sheet</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cancel-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>取消<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:closeable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 第一级反馈面板 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aaa<span class="token punctuation">&quot;</span></span> <span class="token attr-name">clickable</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center-title<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aaa<span class="token punctuation">&quot;</span></span> <span class="token attr-name">clickable</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center-title<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aaa<span class="token punctuation">&quot;</span></span> <span class="token attr-name">clickable</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center-title<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-action-sheet</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><strong>Step.2：在 <code>ArtItem.vue</code> 组件的 <code>&lt;style&gt;</code> 节点下，声明 <code>center-title</code> 类名</strong></li></ul><div class="language-css"><pre><code><span class="token selector">.center-title</span> <span class="token punctuation">{</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.3：在 <code>ArtItem.vue</code> 组件的 <code>data</code> 中声明如下的 <code>actions</code> 可选项数组</strong></li></ul><div class="language-js"><pre><code><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">// 第一个面板的可选项列表</span>
    <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;不感兴趣&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;反馈垃圾内容&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;拉黑作者&#39;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.4：基于 <code>v-for</code> 指令，循环渲染一级反馈面板的可选项列表</strong></li></ul><div class="language-html"><pre><code><span class="token comment">&lt;!-- 反馈的动作面板 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-action-sheet</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cancel-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>取消<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:closeable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 第一级反馈面板 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 循环渲染可选项 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">clickable</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center-title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in actions<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.name<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-action-sheet</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div><h2 id="点击一级选项" tabindex="-1">点击一级选项 <a class="header-anchor" href="#点击一级选项" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">目标</p><p>这一小节，我们的目标是给一级选项添加JavaScript交互效果...</p></div><div class="warning custom-block"><p class="custom-block-title">步骤</p><ol><li>为一级选项绑定名为 <code>onCellClick</code> 的点击事件处理函数，同时把当前选项的 <code>name</code> 作为参数，传递给事件处理函数</li><li>在 <code>ArtItem.vue</code> 组件的 <code>methods</code> 节点下，声明 <code>onCellClick</code> 方法</li></ol></div><div class="info custom-block"><p class="custom-block-title">体验</p><ul><li><strong>Step.1：为一级选项绑定名为 <code>onCellClick</code> 的点击事件处理函数，同时把当前选项的 <code>name</code> 作为参数，传递给事件处理函数</strong></li></ul><div class="language-html"><pre><code><span class="token comment">&lt;!-- 一级选项 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">clickable</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center-title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in actions<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onCellClick(item.name)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><ul><li><strong>Step.2：在 <code>ArtItem.vue</code> 组件的 <code>methods</code> 节点下，声明 <code>onCellClick</code> 方法</strong></li></ul><div class="language-js"><pre><code><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 一级选项的点击事件处理函数</span>
  <span class="token function">onCellClick</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">&#39;不感兴趣&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;不感兴趣&#39;</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">false</span>

    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">&#39;拉黑作者&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;拉黑作者&#39;</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">false</span>

    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">&#39;反馈垃圾内容&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// TODO：展示二级反馈面板</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div class="danger custom-block"><p class="custom-block-title">总结</p><ul><li>【重点】</li><li>【难点】</li><li>【注意点】</li><li>【面试题】</li></ul></div><h2 id="渲染二级反馈面板的结构" tabindex="-1">渲染二级反馈面板的结构 <a class="header-anchor" href="#渲染二级反馈面板的结构" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">目标</p><p>这一小节，我们的目标是渲染二级反馈面板的结构</p></div><div class="warning custom-block"><p class="custom-block-title">步骤</p><ol><li>在 <code>ArtItem.vue</code> 组件的反馈动作面板中，声明二级反馈面板</li><li>在 <code>ArtItem.vue</code> 组件的 data 节点下，定义名为 <code>isFirst</code> 的布尔值，用来控制是否展示第一个面</li><li>在 <code>ArtItem.vue</code> 组件中的反馈动作面板中，结合 <code>v-if</code> 与 <code>v-else</code> 指令，按需展示对应的反馈面板</li><li>点击一级反馈面板中的反馈垃圾内容选项时，将 <code>isFirst</code> 设置为 <code>false</code>，从而展示二级反馈面板</li><li>当点击二级反馈面板中的返回时，将 <code>isFirst</code> 设置为 <code>true</code>，从而展示一级反馈面板</li><li>监听 <code>&lt;van-action-sheet&gt;</code> 的 <code>@closed</code> 事件，当动作面板完全关闭且结束动画以后，将 <code>isFirst</code> 设置为 <code>true</code>。保证下次打开动作面板时，默认展示第一个反馈面板</li></ol></div><div class="info custom-block"><p class="custom-block-title">体验</p><ul><li><strong>Step.1：在 <code>ArtItem.vue</code> 组件的反馈动作面板中，声明二级反馈面板</strong></li></ul><div class="language-html"><pre><code><span class="token comment">&lt;!-- 一级选项 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">clickable</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center-title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in actions<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onCellClick(item.name)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><ul><li><strong>Step.2：在 <code>ArtItem.vue</code> 组件的 data 节点下，定义名为 <code>isFirst</code> 的布尔值，用来控制是否展示第一个面</strong></li></ul><div class="language-js"><pre><code><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 一级选项的点击事件处理函数</span>
  <span class="token function">onCellClick</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">&#39;不感兴趣&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;不感兴趣&#39;</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">false</span>

    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">&#39;拉黑作者&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;拉黑作者&#39;</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">false</span>

    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">&#39;反馈垃圾内容&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// TODO：展示二级反馈面板</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.3：在 <code>ArtItem.vue</code> 组件中的反馈动作面板中，结合 <code>v-if</code> 与 <code>v-else</code> 指令，按需展示对应的反馈面板</strong></li></ul><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-action-sheet</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cancel-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>取消<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:closeable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 第一级反馈面板 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isFirst<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">clickable</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center-title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in actions<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onCellClick(item.name)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 第二级反馈面板 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>返回<span class="token punctuation">&quot;</span></span> <span class="token attr-name">clickable</span> <span class="token attr-name">title-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center-title<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-action-sheet</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><strong>Step.4：点击一级反馈面板中的反馈垃圾内容选项时，将 <code>isFirst</code> 设置为 <code>false</code>，从而展示二级反馈面板</strong></li></ul><div class="language-js"><pre><code><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">&#39;反馈垃圾内容&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// TODO：展示二级反馈面板</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>isFirst <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.5：当点击二级反馈面板中的返回时，将 <code>isFirst</code> 设置为 <code>true</code>，从而展示一级反馈面板</strong></li></ul><div class="language-html"><pre><code><span class="token comment">&lt;!-- 第二级反馈面板 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>返回<span class="token punctuation">&quot;</span></span> <span class="token attr-name">clickable</span> <span class="token attr-name">title-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center-title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isFirst = true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><strong>Step.6：监听 <code>&lt;van-action-sheet&gt;</code> 的 <code>@closed</code> 事件，当动作面板完全关闭且结束动画以后，将 <code>isFirst</code> 设置为 <code>true</code>。保证下次打开动作面板时，默认展示第一个反馈面板</strong></li></ul><div class="language-html"><pre><code><span class="token comment">&lt;!-- 反馈的动作面板 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-action-sheet</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cancel-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>取消<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:closeable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@closed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isFirst = true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 省略其它代码 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-action-sheet</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div><div class="danger custom-block"><p class="custom-block-title">总结</p><ul><li>【重点】</li><li>【难点】</li><li>【注意点】</li><li>【面试题】</li></ul></div><h2 id="渲染二级反馈面板的数据" tabindex="-1">渲染二级反馈面板的数据 <a class="header-anchor" href="#渲染二级反馈面板的数据" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">目标</p><p>这一小节，我们的目标是渲染二级反馈面板的数据</p></div><div class="warning custom-block"><p class="custom-block-title">步骤</p><ol><li>在 <code>/src/api/</code> 目录下，新建 <code>reports.js</code> 模块，用来定义第二个反馈面板要用到的列</li><li>在 <code>ArtItem.vue</code> 组件中，导入 <code>/src/api/reports.js</code> 模块</li><li>并将导入得到的 <code>reports</code> 数组挂载为 <code>ArtItem.vue</code> 组件的 <code>data</code> 数据，供模板结构进行 <code>v-for</code>循环的渲染</li><li>在 <code>ArtItem.vue</code> 组件的模板结构中，循环渲染<strong>二级反馈面板</strong>的可选项列表</li></ol></div><div class="info custom-block"><p class="custom-block-title">体验</p><ul><li><strong>Step.1：在 <code>/src/api/</code> 目录下，新建 <code>reports.js</code> 模块，用来定义第二个反馈面板要用到的列</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// 以模块的方式导出&quot;举报文章&quot;时，后端接口约定的举报类型</span>
<span class="token keyword">const</span> reports <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;其它问题&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;标题夸张&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;低俗色情&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;错别字多&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;旧闻重复&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
    <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;内容不实&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
    <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;侵权&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;广告软文&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
    <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;涉嫌违法犯罪&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> reports
</code></pre></div><ul><li><strong>Step.2：在 <code>ArtItem.vue</code> 组件中，导入 <code>/src/api/reports.js</code> 模块</strong></li></ul><div class="language-js"><pre><code><span class="token keyword">import</span> reports <span class="token keyword">from</span> <span class="token string">&#39;@/api/reports&#39;</span>
</code></pre></div><ul><li><strong>Step.3：并将导入得到的 <code>reports</code> 数组挂载为 <code>ArtItem.vue</code> 组件的 <code>data</code> 数据，供模板结构进行 <code>v-for</code>循环的渲染</strong></li></ul><div class="language-js"><pre><code><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">// 省略其它数据项...</span>

    <span class="token comment">// 第二个面板的可选项列表，数组中每一项的格式 { type, label }</span>
    reports
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.4：在 <code>ArtItem.vue</code> 组件的模板结构中，循环渲染</strong>二级反馈面板<strong>的可选项列表</strong></li></ul><div class="language-html"><pre><code><span class="token comment">&lt;!-- 第二级反馈面板 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>返回<span class="token punctuation">&quot;</span></span> <span class="token attr-name">clickable</span> <span class="token attr-name">title-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center-title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isFirst = true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.label<span class="token punctuation">&quot;</span></span> <span class="token attr-name">clickable</span> <span class="token attr-name">title-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center-title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in reports<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.type<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div><h2 id="指定动作面板的挂载位置" tabindex="-1">指定动作面板的挂载位置 <a class="header-anchor" href="#指定动作面板的挂载位置" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">目标</p><p>这一小节，我们的目标是指定动作面板的挂载位置</p></div><div class="warning custom-block"><p class="custom-block-title">步骤</p><ol><li><p>默认情况下，我们是在 <code>ArtItem.vue</code> 组件中使用的 <code>&lt;van-action-sheet&gt;</code> 组件，因此动作面板的 <code>DOM</code> 结构会被渲染到 <code>List</code> 列表组件 内部：</p><ul><li><strong>导致的问题</strong>：动作面板中的内容上下滑动时，会导致 <code>List 列表组件的</code> <strong>下拉刷新</strong></li></ul></li><li><p>解决方案：把 <code>ActionList</code> 组件，通过 <code>get-container</code> 属性，挂载到 <code>body</code> 元素下</p></li></ol><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-action-sheet</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cancel-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>取消<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:closeable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@closed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isFirst = true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">get-container</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 省略其它代码 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-action-sheet</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div><h2 id="将文章设置为不感兴趣" tabindex="-1">将文章设置为不感兴趣 <a class="header-anchor" href="#将文章设置为不感兴趣" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">目标</p><p>这一小节，我们的目标是将文章设置为不感兴趣</p></div><div class="warning custom-block"><p class="custom-block-title">步骤</p><ol><li>在<code>/src/api/homeAPI.js</code> 模块中，定义名为 <code>dislikeArticleAPI</code> 的方法，用来将指定 id 的文章设置为不感兴趣</li><li>在 <code>ArtItem.vue</code> 组件中，按需导入 <code>API</code> 接口</li><li>在 <code>ArtItem.vue</code> 组件中，基于 props 中的 <code>article</code> 文章对象，定义名为 <code>artId</code> 的计算属性</li><li>在 <code>onCellClick</code> 处理函数中，调用 API 接口，将指定 Id 的文章设置不感兴趣</li></ol></div><div class="info custom-block"><p class="custom-block-title">体验</p><ul><li><strong>Step.1：在<code>/src/api/homeAPI.js</code> 模块中，定义名为 <code>dislikeArticleAPI</code> 的方法，用来将指定 id 的文章设置为不感兴趣</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// 将文章设置为不感兴趣（形参 id 是文章的 id）</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">dislikeArticleAPI</span> <span class="token operator">=</span> <span class="token parameter">id</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/v1_0/article/dislikes&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">target</span><span class="token operator">:</span> id
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.2：在 <code>ArtItem.vue</code> 组件中，按需导入 <code>API</code> 接口</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// 按需导入 API 接口</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> dislikeArticleAPI <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/api/homeAPI.js&#39;</span>
</code></pre></div><ul><li><strong>Step.3：在 <code>ArtItem.vue</code> 组件中，基于 props 中的 <code>article</code> 文章对象，定义名为 <code>artId</code> 的计算属性</strong></li></ul><div class="language-js"><pre><code><span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 文章的信息对象</span>
  <span class="token literal-property property">article</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span> <span class="token comment">// 数据类型</span>
    <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 必填项</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 文章 Id 的计算属性</span>
  <span class="token function">artId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 注意：文章对象的 art_id 是大数对象，需要调用 .toString() 方法转换为字符串形式</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>article<span class="token punctuation">.</span>art_id<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.4：在 <code>onCellClick</code> 处理函数中，调用 API 接口，将指定 Id 的文章设置不感兴趣</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// 一级选项的点击事件处理函数</span>
<span class="token keyword">async</span> <span class="token function">onCellClick</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">&#39;不感兴趣&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 调用 API 接口，将文章设置为不感兴趣</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">dislikeArticleAPI</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>artId<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>message <span class="token operator">===</span> <span class="token string">&#39;OK&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// TODO：炸楼的操作</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 省略其它代码...</span>
<span class="token punctuation">}</span>
</code></pre></div></div><h2 id="从列表中移除不感兴趣的文章" tabindex="-1">从列表中移除不感兴趣的文章 <a class="header-anchor" href="#从列表中移除不感兴趣的文章" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">目标</p><p>这一小节，我们的目标是从列表中移除不感兴趣的文章</p></div><div class="warning custom-block"><p class="custom-block-title">步骤</p><ol><li>在 <code>ArtItem.vue</code> 组件中，通过 <code>this.$emit()</code> 触发自定义事件，把要删除的文章 Id 传递给父组件</li><li>在 <code>ArtList.vue</code> 组件中使用 <code>ArtItem.vue</code> 组件时，监听 <code>ArtItem.vue</code> 组件的 <code>@remove-article</code> 事件</li><li>在 <code>ArtList.vue</code> 组件的 methods 中，声明 <code>removeArticle</code> 方法</li></ol></div><div class="info custom-block"><p class="custom-block-title">体验</p><ul><li><strong>Step.1：在 <code>ArtItem.vue</code> 组件中，通过 <code>this.$emit()</code> 触发自定义事件，把要删除的文章 Id 传递给父组件</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// 一级选项的点击事件处理函数</span>
<span class="token keyword">async</span> <span class="token function">onCellClick</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">&#39;不感兴趣&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 调用 API 接口，将文章设置为不感兴趣</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">dislikeArticleAPI</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>artId<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>message <span class="token operator">===</span> <span class="token string">&#39;OK&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// TODO：炸楼的操作，触发自定义的事件，将文章 id 发送给父组件</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;remove-article&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>artId<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 省略其它代码...</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.2：在 <code>ArtList.vue</code> 组件中使用 <code>ArtItem.vue</code> 组件时，监听 <code>ArtItem.vue</code> 组件的 <code>@remove-article</code> 事件</strong></li></ul><div class="language-html"><pre><code><span class="token comment">&lt;!-- 循环渲染文章的列表 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>art-item</span>
   <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in artlist<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.art_id.toString()<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name">:article</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name">@remove-article</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>removeArticle<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>art-item</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><strong>Step.3：在 <code>ArtList.vue</code> 组件的 methods 中，声明 <code>removeArticle</code> 方法</strong></li></ul><div class="language-js"><pre><code><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 从文章列表中移除指定 id 的文章</span>
  <span class="token function">removeArticle</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 对原数组进行 filter 方法的过滤</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>artlist <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>artlist<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>art_id<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!==</span> id<span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div class="danger custom-block"><p class="custom-block-title">总结</p><ul><li>【重点】</li><li>【难点】</li><li>【注意点】</li><li>【面试题】</li></ul></div><h2 id="炸楼之后防止上拉加载不生效" tabindex="-1">炸楼之后防止上拉加载不生效 <a class="header-anchor" href="#炸楼之后防止上拉加载不生效" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">目标</p><p>这一小节，我们的目标是解决炸楼之后防治上拉加载不生效的问题，具体来讲就是： 炸楼之后，如果文章列表的数据不足以撑满整个屏幕，会导致上拉加载和下拉刷新不生效的问题，解决方案： 每次炸楼之后，判断剩余数据的文章数量是否小于 10，如果小于 10，则主动请求下一页的数据</p></div><div class="warning custom-block"><p class="custom-block-title">步骤</p><ol><li>在 <code>ArtList.vue</code> 组件的 methods 节点下，改造 <code>removeArticle</code> 方法</li></ol></div><div class="info custom-block"><p class="custom-block-title">体验</p><ul><li><strong>Step.1： 在 <code>ArtList.vue</code> 组件的 methods 节点下，改造 <code>removeArticle</code> 方法</strong></li></ul><div class="language-js"><pre><code><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 从文章列表中移除指定 id 的文章</span>
  <span class="token function">removeArticle</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. 炸楼操作</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>artlist <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>artlist<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>art_id<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!==</span> id<span class="token punctuation">)</span>

    <span class="token comment">// 2. 判断剩余数据的文章数量是否小于 10</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>artlist<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 主动请求下一页的数据</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initArtList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div class="danger custom-block"><p class="custom-block-title">总结</p><ul><li>【重点】</li><li>【难点】</li><li>【注意点】</li><li>【面试题】</li></ul></div><h2 id="实现举报文章的功能" tabindex="-1">实现举报文章的功能 <a class="header-anchor" href="#实现举报文章的功能" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">目标</p><p>这一小节，我们的目标是实现举报文章的功能</p></div><div class="warning custom-block"><p class="custom-block-title">步骤</p><ol><li>在 <code>/sr/api/homeAPI.js</code> 模块中，定义 <code>reportArticleAPI</code> 的方法，用来实现举报文章的功能</li><li>在 <code>ArtItem.vue</code> 组件中，按需导入举报文章的 <code>API</code>接口</li><li>在 <code>ArtItem.vue</code> 组件中，为二级反馈面板中的选项，绑定点击事件处理函数，将举报的类型作为参数，传递到事件处理函数中</li><li>在 <code>ArtItem.vue</code>组件的 methods 节点下，定义名为 <code>reportArticle</code> 的点击事件处理函数</li></ol></div><div class="info custom-block"><p class="custom-block-title">体验</p><ul><li><strong>Step.1：在 <code>/sr/api/homeAPI.js</code> 模块中，定义 <code>reportArticleAPI</code> 的方法，用来实现举报文章的功能</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// 举报文章的 API</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">reportArticleAPI</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/v1_0/article/reports&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    target<span class="token punctuation">,</span> <span class="token comment">// 文章的 Id</span>
    type <span class="token comment">// 举报的类型</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.2：在 <code>ArtItem.vue</code> 组件中，按需导入举报文章的 <code>API</code>接口</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// 按需导入 API 接口</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> dislikeArticleAPI<span class="token punctuation">,</span> reportArticleAPI <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/api/homeAPI.js&#39;</span>
</code></pre></div><ul><li><strong>Step.3：在 <code>ArtItem.vue</code> 组件中，为二级反馈面板中的选项，绑定点击事件处理函数，将举报的类型作为参数，传递到事件处理函数中</strong></li></ul><div class="language-html"><pre><code><span class="token comment">&lt;!-- 第二级反馈面板 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>返回<span class="token punctuation">&quot;</span></span> <span class="token attr-name">clickable</span> <span class="token attr-name">title-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center-title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isFirst = true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.label<span class="token punctuation">&quot;</span></span> <span class="token attr-name">clickable</span> <span class="token attr-name">title-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center-title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in reports<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.type<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reportArticle(item.type)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><strong>Step.4：在 <code>ArtItem.vue</code>组件的 methods 节点下，定义名为 <code>reportArticle</code> 的点击事件处理函数</strong></li></ul><div class="language-js"><pre><code><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 举报文章（形参 type 是举报的类型值）</span>
  <span class="token keyword">async</span> <span class="token function">reportArticle</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. 发起举报文章的请求</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">reportArticleAPI</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>artId<span class="token punctuation">,</span> type<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>message <span class="token operator">===</span> <span class="token string">&#39;OK&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 2. 炸楼操作，触发自定义事件，把文章 Id 发送给父组件</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;remove-article&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>artId<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 3. 关闭动作面板</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-07c132fc><div class="edit" data-v-07c132fc><div class="edit-link" data-v-07c132fc data-v-1ed99556><!----></div></div><div class="updated" data-v-07c132fc><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"early_deploy-axios.md\":\"6c6e5de6\",\"early_deploy-screen-adaptation.md\":\"d1b57d24\",\"early_deploy-vant.md\":\"05c03936\",\"early_initialization.md\":\"2c220c58\",\"early_introduction.md\":\"8c54426f\",\"early_layout.md\":\"02b2cab3\",\"index.md\":\"0f8c7cf6\",\"late_build-package.md\":\"f99cadff\",\"late_permission-control.md\":\"cd33dedf\",\"late_project-optimization.md\":\"19121866\",\"late_token-renew.md\":\"be8677d4\",\"middle_article-detail-comment-create.md\":\"8d198c0c\",\"middle_article-detail-comment-like.md\":\"78d34104\",\"middle_article-detail-comment-render.md\":\"a20e7d04\",\"middle_article-detail-comment-unlike.md\":\"367e97b1\",\"middle_article-detail-create.md\":\"c9b4f07d\",\"middle_article-detail-follow.md\":\"a4c277aa\",\"middle_article-detail-like.md\":\"cba64edf\",\"middle_article-detail-props.md\":\"fcf1d931\",\"middle_article-detail-pubcomment-autofocus.md\":\"4cd7adbf\",\"middle_article-detail-pubcomment-condition.md\":\"2e59ba35\",\"middle_article-detail-pubcomment-count.md\":\"3fcd2566\",\"middle_article-detail-pubcomment-create.md\":\"0c8c1cdd\",\"middle_article-detail-pubcomment-function.md\":\"2ecbae86\",\"middle_article-detail-pubcomment-popmotion.md\":\"b35e530c\",\"middle_article-detail-render.md\":\"4be1dc31\",\"middle_article-detail-unfollow.md\":\"81859c2c\",\"middle_article-detail-unlike.md\":\"0c918191\",\"middle_home-article-dateformat.md\":\"1c0b7305\",\"middle_home-article-feedback-first.md\":\"853414b9\",\"middle_home-article-feedback-pannel.md\":\"dc5c8e29\",\"middle_home-article-feedback-second.md\":\"d7581099\",\"middle_home-article-lazyload.md\":\"b9ad04e7\",\"middle_home-article-list-channelid.md\":\"dab42ebc\",\"middle_home-article-list-data.md\":\"267d0968\",\"middle_home-article-list-item.md\":\"e8650b57\",\"middle_home-article-list.md\":\"756e4b7e\",\"middle_home-article-not-interesting.md\":\"f5b961a6\",\"middle_home-article-pannel-position.md\":\"21d4d550\",\"middle_home-article-pullload.md\":\"591b829d\",\"middle_home-article-pullrefresh.md\":\"f126ccbe\",\"middle_home-channel-add.md\":\"a59e525f\",\"middle_home-channel-contact.md\":\"c3c1bc80\",\"middle_home-channel-minus.md\":\"3d3d5052\",\"middle_home-channel-more.md\":\"1cc9b907\",\"middle_home-channel-render.md\":\"b112f0e5\",\"middle_home-channel-reset.md\":\"abd48fa6\",\"middle_home-channels-dynamic.md\":\"63d8eb51\",\"middle_home-channels-static.md\":\"ba1e58a6\",\"middle_home-page.md\":\"7f805dcb\",\"middle_home-render-base.md\":\"b0ca172d\",\"middle_login-form-function.md\":\"dc57fcb3\",\"middle_login-form-rules.md\":\"641fa0a3\",\"middle_login-global-auth.md\":\"0e2cd026\",\"middle_login-global-loading.md\":\"7ff308b5\",\"middle_login-render-base.md\":\"35822ea2\",\"middle_login-render-form.md\":\"44bec7a2\",\"middle_login-render-header.md\":\"09c36b4f\",\"middle_login-token-storage.md\":\"e7982093\",\"middle_login-token-vuex.md\":\"cb649e81\",\"middle_profile-logout.md\":\"c98dd037\",\"middle_profile-render.md\":\"c0ab9a68\",\"middle_profile-user-edit-avatar.md\":\"4edc465b\",\"middle_profile-user-edit-birthday.md\":\"81ea663b\",\"middle_profile-user-edit-name.md\":\"4bb571aa\",\"middle_profile-user-edit-render.md\":\"cc02877f\",\"middle_search-input-autofocus.md\":\"b894ad73\",\"middle_search-input-debounce.md\":\"4ee7a4c4\",\"middle_search-keywords-highlight.md\":\"547d267b\",\"middle_search-listory-add.md\":\"e2a17e65\",\"middle_search-listory-clean.md\":\"c22d627a\",\"middle_search-listory-render.md\":\"2cb8934b\",\"middle_search-listory-save.md\":\"209f9efa\",\"middle_search-page-render.md\":\"594179ae\",\"middle_search-result-create.md\":\"897c5c13\",\"middle_search-result-jump.md\":\"d1bc7112\",\"middle_search-result-pullload.md\":\"3da2768c\",\"middle_search-result-render.md\":\"2a27a31a\",\"middle_search-result-toggle.md\":\"8f6567b2\",\"middle_websocket-auto-scroll-bottom.md\":\"37b235b4\",\"middle_websocket-avatar-render.md\":\"4a65f1c8\",\"middle_websocket-chat-page.md\":\"a48af99b\",\"middle_websocket-chat-push.md\":\"67a83cde\",\"middle_websocket-chat-render.md\":\"36388db2\",\"middle_websocket-connect-listen.md\":\"4dc7dc33\",\"middle_websocket-create-destory.md\":\"af04ce51\",\"middle_websocket-install-config.md\":\"bd1f8c35\",\"middle_websocket-introduce.md\":\"b3e8d090\",\"middle_websocket-message-receive.md\":\"9df37ee1\",\"middle_websocket-message-send.md\":\"4afc9145\"}")</script>
    <script type="module" async src="/HeiMaTouTiao/assets/app.e4ff3064.js"></script>
    
  </body>
</html>