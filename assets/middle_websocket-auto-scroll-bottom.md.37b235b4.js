import{_ as n,c as s,o as a,a as t}from"./app.e4ff3064.js";const h='{"title":"\u81EA\u52A8\u6EDA\u52A8\u5230\u5E95\u90E8","description":"","frontmatter":{},"headers":[],"relativePath":"middle/websocket-auto-scroll-bottom.md"}',o={},p=t(`<h1 id="\u81EA\u52A8\u6EDA\u52A8\u5230\u5E95\u90E8" tabindex="-1">\u81EA\u52A8\u6EDA\u52A8\u5230\u5E95\u90E8 <a class="header-anchor" href="#\u81EA\u52A8\u6EDA\u52A8\u5230\u5E95\u90E8" aria-hidden="true">#</a></h1><div class="tip custom-block"><p class="custom-block-title">\u76EE\u6807</p><p>\u8FD9\u4E00\u5C0F\u8282\uFF0C\u6211\u4EEC\u7684\u76EE\u6807\u662F \u8BA9\u804A\u5929\u4FE1\u606F\u81EA\u52A8\u6EDA\u52A8\u5230\u5E95\u90E8</p></div><div class="warning custom-block"><p class="custom-block-title">\u6B65\u9AA4</p><ol><li>\u5728 <code>methods</code> \u4E2D\u58F0\u660E <code>scrollToBottom</code> \u65B9\u6CD5</li><li>\u5728 <code>Chat</code> \u7EC4\u4EF6\u4E2D\u5B9A\u4E49 <code>watch</code> \u4FA6\u542C\u5668\uFF0C\u76D1\u89C6 <code>list</code> \u6570\u7EC4\u7684\u53D8\u5316\uFF0C\u4ECE\u800C\u81EA\u52A8\u6EDA\u52A8\u5230\u9875\u9762\u5E95\u90E8</li></ol></div><div class="info custom-block"><p class="custom-block-title">\u4F53\u9A8C</p><ul><li><strong>Step.1\uFF1A\u5728 <code>methods</code> \u4E2D\u58F0\u660E <code>scrollToBottom</code> \u65B9\u6CD5</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// \u6EDA\u52A8\u5230\u9875\u9762\u5E95\u90E8</span>
<span class="token function">scrollToBottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 1. \u83B7\u53D6\u5230\u6240\u6709\u7684\u804A\u5929 Item \u9879</span>
  <span class="token keyword">const</span> chatItem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&#39;.chat-item&#39;</span><span class="token punctuation">)</span>
  <span class="token comment">// 2. \u83B7\u53D6\u5230\u6700\u540E\u4E00\u9879\u5BF9\u5E94\u7684 DOM \u5143\u7D20</span>
  <span class="token keyword">const</span> lastItem <span class="token operator">=</span> chatItem<span class="token punctuation">[</span>chatItem<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>

  <span class="token comment">// 3. \u6EDA\u52A8\u5143\u7D20\u7684\u7236\u5BB9\u5668\uFF0C\u4F7F\u88AB\u8C03\u7528 scrollIntoView() \u7684\u5143\u7D20\u5BF9\u7528\u6237\u53EF\u89C1</span>
  lastItem<span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">behavior</span><span class="token operator">:</span> <span class="token string">&#39;smooth&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// \u5B9A\u4E49\u5782\u76F4\u65B9\u5411\u7684\u5BF9\u9F50\uFF08end \u8868\u793A\u5143\u7D20\u7684\u5E95\u7AEF\u5C06\u548C\u5176\u6240\u5728\u6EDA\u52A8\u533A\u7684\u53EF\u89C6\u533A\u57DF\u7684\u5E95\u7AEF\u5BF9\u9F50\uFF09</span>
    <span class="token literal-property property">block</span><span class="token operator">:</span> <span class="token string">&#39;end&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Step.2\uFF1A\u5728 <code>Chat</code> \u7EC4\u4EF6\u4E2D\u5B9A\u4E49 <code>watch</code> \u4FA6\u542C\u5668\uFF0C\u76D1\u89C6 <code>list</code> \u6570\u7EC4\u7684\u53D8\u5316\uFF0C\u4ECE\u800C\u81EA\u52A8\u6EDA\u52A8\u5230\u9875\u9762\u5E95\u90E8</strong></li></ul><div class="language-js"><pre><code><span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u76D1\u89C6\u5230 list \u6570\u636E\u53D8\u5316\u540E\uFF0C\u7B49 DOM \u66F4\u65B0\u5B8C\u6BD5\uFF0C\u518D\u6267\u884C\u6EDA\u52A8\u5230\u5E95\u90E8\u7684\u64CD\u4F5C</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">scrollToBottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div class="danger custom-block"><p class="custom-block-title">\u603B\u7ED3</p><ul><li>\u3010\u91CD\u70B9\u3011</li><li>\u3010\u96BE\u70B9\u3011</li><li>\u3010\u6CE8\u610F\u70B9\u3011</li></ul></div>`,5),c=[p];function e(l,i,u,r,k,d){return a(),s("div",null,c)}var _=n(o,[["render",e]]);export{h as __pageData,_ as default};
