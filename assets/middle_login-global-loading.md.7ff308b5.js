import{_ as n,c as s,o as a,a as t}from"./app.e4ff3064.js";const m='{"title":"\u5168\u5C40loading\u6548\u679C","description":"","frontmatter":{},"headers":[],"relativePath":"middle/login-global-loading.md"}',o={},p=t(`<h1 id="\u5168\u5C40loading\u6548\u679C" tabindex="-1">\u5168\u5C40loading\u6548\u679C <a class="header-anchor" href="#\u5168\u5C40loading\u6548\u679C" aria-hidden="true">#</a></h1><div class="tip custom-block"><p class="custom-block-title">\u76EE\u6807</p><p>\u8FD9\u4E00\u5C0F\u8282\uFF0C\u6211\u4EEC\u7684\u76EE\u6807\u662F\u57FA\u4E8E Vant \u7684 <a href="https://vant-contrib.gitee.io/vant/#/zh-CN/toast" target="_blank" rel="noopener noreferrer">Toast \u8F7B\u63D0\u793A</a> \u7EC4\u4EF6\uFF0C\u65B9\u4FBF\u7684\u5C55\u793A loading \u6548\u679C</p></div><div class="warning custom-block"><p class="custom-block-title">\u6B65\u9AA4</p><ol><li>\u5728<code>src/utils/request.js</code>\u6A21\u5757\u4E2D\uFF0C\u4ECE<code>vant</code>\u4E2D\u6309\u9700\u5BFC\u5165<code>Toast</code>\u7EC4\u4EF6</li><li>\u5728\u8BF7\u6C42\u62E6\u622A\u5668\u4E2D\uFF0C\u5C55\u793Aloading\u63D0\u793A\u6548\u679C</li><li>\u5728\u54CD\u5E94\u62E6\u622A\u5668\u4E2D\uFF0C\u9690\u85CFloading\u63D0\u793A\u6548\u679C</li></ol></div><div class="info custom-block"><p class="custom-block-title">\u4F53\u9A8C</p><ul><li><strong>Step.1\uFF1A \u5728<code>src/utils/request.js</code>\u6A21\u5757\u4E2D\uFF0C\u4ECE<code>vant</code>\u4E2D\u6309\u9700\u5BFC\u5165<code>Toast</code>\u7EC4\u4EF6</strong></li></ul><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Toast <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vant&#39;</span>
</code></pre></div><ul><li><strong>Step.2\uFF1A \u5728\u8BF7\u6C42\u62E6\u622A\u5668\u4E2D\uFF0C\u5C55\u793Aloading\u63D0\u793A\u6548\u679C</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// \u8BF7\u6C42\u62E6\u622A\u5668</span>
<span class="token comment">// \u6CE8\u610F\uFF1A\u5728\u6211\u4EEC\u7684\u9879\u76EE\u4E2D\uFF0C\u662F\u57FA\u4E8E instance \u5B9E\u4F8B\u6765\u53D1\u8D77 ajax \u8BF7\u6C42\u7684\uFF0C</span>
<span class="token comment">// \u56E0\u6B64\u4E00\u5B9A\u8981\u4E3A instance \u5B9E\u4F8B\u7ED1\u5B9A\u8BF7\u6C42\u62E6\u622A\u5668</span>
instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5C55\u793A loading \u6548\u679C</span>
    Toast<span class="token punctuation">.</span><span class="token function">loading</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;\u52A0\u8F7D\u4E2D...&#39;</span><span class="token punctuation">,</span> <span class="token comment">// \u6587\u672C\u5185\u5BB9</span>
      <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token comment">// \u5C55\u793A\u65F6\u957F(ms)\uFF0C\u503C\u4E3A 0 \u65F6\uFF0Ctoast \u4E0D\u4F1A\u6D88\u5931</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> config
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div><ul><li><strong>Step.3\uFF1A \u5728\u54CD\u5E94\u62E6\u622A\u5668\u4E2D\uFF0C\u9690\u85CFloading\u63D0\u793A\u6548\u679C</strong></li></ul><div class="language-js"><pre><code><span class="token comment">// \u54CD\u5E94\u62E6\u622A\u5668\uFF08\u6CE8\u610F\uFF1A\u54CD\u5E94\u62E6\u622A\u5668\u4E5F\u5E94\u8BE5\u7ED1\u5B9A\u7ED9 instance \u5B9E\u4F8B\uFF09</span>
instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u9690\u85CF loading \u6548\u679C</span>
    Toast<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> response
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div></div><div class="danger custom-block"><p class="custom-block-title">\u603B\u7ED3</p><ul><li>\u3010\u91CD\u70B9\u3011</li><li>\u3010\u96BE\u70B9\u3011</li><li>\u3010\u6CE8\u610F\u70B9\u3011</li></ul></div>`,5),e=[p];function c(l,i,r,u,k,d){return a(),s("div",null,e)}var _=n(o,[["render",c]]);export{m as __pageData,_ as default};
